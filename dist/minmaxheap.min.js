var minmaxheap=function(t){"use strict";function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function a(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,i,e){return i&&a(t.prototype,i),e&&a(t,e),t}var r=function(){function t(){n(this,t)}return i(t,null,[{key:"parent",value:function(t){return(t-1)/2|0}},{key:"grandParent",value:function(t){return(t-1)/4|0}},{key:"left",value:function(t){return 2*t+1}},{key:"right",value:function(t){return 2*t+2}},{key:"child",value:function(t){return 2*t+1}},{key:"grandChild",value:function(t){return 4*t+3}},{key:"swap",value:function(t,i){var e=t;return t=i,[i=e,t]}}]),t}(),e=function(){function a(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t,i){return t<i};n(this,a),this.comparator=e,this.duplicate=i,this.hasData=t,this._heap=[],this._data=[],this._size=0}return i(a,[{key:"init",value:function(){this._heap=[],this._size=0}},{key:"clear",value:function(){this.init()}},{key:"empty",value:function(){return 0===this._size}},{key:"hasParent",value:function(t){return 0!==t&&0<=r.parent(t)}},{key:"hasGrandParent",value:function(t){return!!this.hasParent(t)&&0<=r.grandParent(t)}},{key:"hasChild",value:function(t){return r.child(t)<this._size}},{key:"hasGrandChild",value:function(t){return r.grandChild(t)<this._size}},{key:"hasLeft",value:function(t){return r.left(t)<this._size}},{key:"hasRight",value:function(t){return r.right(t)<this._size}},{key:"isMinLevel",value:function(t){return 1&(0|Math.log2(t+1))}},{key:"isMaxLevel",value:function(t){return!this.isMinLevel(t)}},{key:"swap",value:function(t,i){var e=[this._heap[i],this._heap[t]];this._heap[t]=e[0],this._heap[i]=e[1];var a=[this._data[i],this._data[t]];this._data[t]=a[0],this._data[i]=a[1]}},{key:"_bubbleUp",value:function(t,i){if(0!==t){var e=r.parent(t);if(0!==e){var a=r.parent(e);this.comparator(this._heap[t],this._heap[a])^i&&(this.swap(t,a),this._bubbleUp(a,i))}}}},{key:"bubbleUp",value:function(t){if(0!==t){var i=r.parent(t);this.isMinLevel(t)?this.comparator(this._heap[t],this._heap[i])?this._bubbleUp(t,!1):(this.swap(t,i),this._bubbleUp(i,!0)):this.comparator(this._heap[t],this._heap[i])?(this.swap(t,i),this._bubbleUp(i,!1)):this._bubbleUp(t,!0)}}},{key:"_getMinChild",value:function(t,i){var e=t;if(!this.hasChild(t))return e;for(var a=r.child(t),n=0;n<2&&a+n<this._size;n++)this.comparator(this._heap[a+n],this._heap[e])^i&&(e=a+n);for(var h=r.child(a),s=0;s<4&&h+s<this._size;s++)this.comparator(this._heap[h+s],this._heap[e])^i&&(e=h+s);return e}},{key:"_trickleDown",value:function(t,i){if(!(t>=this._size)){var e=r.child(t),a=this._getMinChild(t,i);a!==t&&(this.swap(a,t),1<a-e&&(this.comparator(this._heap[r.parent(a)],this._heap[a])^i&&this.swap(r.parent(a),a),this._trickleDown(a,i)))}}},{key:"trickleDown",value:function(t){this.isMinLevel(t)?this._trickleDown(t,!1):this._trickleDown(t,!0)}},{key:"getMinIndex",value:function(){return 0===this._size?null:1===this._size?0:2===this._size?1:this.comparator(this._heap[1],this._heap[2])?1:2}},{key:"add",value:function(t,i){this._heap.push(t),this._data.push(i),this._size+=1}},{key:"remove",value:function(t){if(t>=this._size)return null;var i=null,e=null;if(t===this._size-1){var a=[this._heap.pop(),this._data.pop()];return i=a[0],e=a[1],this._size-=1,this.hasData?[i,e]:i}this.swap(t,this._size-1);var n=[this._heap.pop(),this._data.pop()];i=n[0],e=n[1],this._size-=1,this.trickleDown(t)}},{key:"push",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.add(t,i),this.bubbleUp(this._size-1)}},{key:"max",value:function(){return this.empty()?null:this.hasData?[this._heap[0],this._data[0]]:this._heap[0]}},{key:"min",value:function(){if(this.empty())return null;var t=this.getMinIndex();return this.hasData?[this._heap[t],this._data[t]]:this._heap[t]}},{key:"popMin",value:function(){if(this.empty())return null;var t=this.getMinIndex(),i=[this._heap[t],this._data[t]],e=i[0],a=i[1];return this.remove(t),this.hasData?[e,a]:e}},{key:"popMax",value:function(){if(this.empty())return null;var t=[this._heap[0],this._data[0]],i=t[0],e=t[1];return this.remove(0),this.hasData?[i,e]:i}},{key:"pop",value:function(){return!(0<arguments.length&&void 0!==arguments[0])||arguments[0]?this.popMax():this.popMin()}},{key:"heap",get:function(){return this._heap}},{key:"size",get:function(){return this._size}}]),a}();return t.MinMaxHeap=e,t}({});
